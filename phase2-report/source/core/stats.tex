In this section, we show both \textbf{query trees} and \textbf{MySQL execution plan} for the first \emph{non-optimized} and \emph{final optimized} version of each query. Moreover, we provide \emph{parallel query processing reports} for each query. This illustrates the optimization of the query statements that might include \emph{schema, query rewriting, semantic and statistical heuristics}. \\

\textbf{Note that,} the cost estimates in \emph{MySQL} execution plan can be inaccurate, due to the following :
\begin{enumerate}
    \item The unit of the cost is an abstract number that not necessarily relate to the real execution. It's just used as a heuristic to order certain operations in the query execution.
    \item \emph{MySQL} estimator considers equal costs for both \emph{CPU} and \emph{IO} operations, which isn't valid, due to modern processors' speeds.
    \item \emph{MySQL} estimator doesn't consider database indexes.
\end{enumerate}


\subsection{Query 1}

\subsubsection{Execution Plan Before Optimization}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/query_trees/query1-non-optimized.png}
    \caption{Query tree for non-optimized query 1}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q1-1-old.png}
    \caption{Visual execution plan for non-optimized query 1}
\end{figure}

\subsubsection{Execution Plan After Optimization}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/query_trees/query1-optimized.png}
    \caption{Query tree for optimized query 1}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q1-3-new.png}
    \caption{Visual execution plan for optimized query 1}
\end{figure}

\subsection{Query 2}

\subsubsection{Execution Plan Before Optimization}
\textbf{Note that,} due to the huge execution time of the query before adding the indexes, we can't extract the actual non-optimized visual execution plan. Therefore, we included the visual execution plan after \emph{index optimization}. 
% \begin{figure}[H]
%     \centering
%     \includegraphics[width=0.8\textwidth]{images/query_trees/query2-non-optimized.png}
%     \caption{Query tree for non-optimized query 2}
% \end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q2-2-new.png}
    \caption{Visual execution plan for non-optimized query 2}
\end{figure}

\subsubsection{Execution Plan After Optimization}
% \begin{figure}[H]
%     \centering
%     \includegraphics[width=0.8\textwidth]{images/query_trees/query2-optimized.png}
%     \caption{Query tree for optimized query 2}
% \end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q2-4-new.png}
    \caption{Visual execution plan for optimized query 2}
\end{figure}

\subsection{Query 3}

\subsubsection{Execution Plan Before Optimization}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.5\textwidth]{images/query_trees/query3-optimized-and-non-optimized.png}
    \caption{Query tree for non-optimized query 3}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q3-1-old.png}
    \caption{Visual execution plan for non-optimized query 3}
\end{figure}

\subsubsection{Execution Plan After Optimization}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.5\textwidth]{images/query_trees/query3-optimized-and-non-optimized.png}
    \caption{Query tree for optimized query 3}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q3-3-new.png}
    \caption{Visual execution plan for optimized query 3}
\end{figure}

\subsection{Query 4}

\subsubsection{Execution Plan Before Optimization}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/query_trees/query4-non-optimized.png}
    \caption{Query tree for non-optimized query 4}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q4-1-old.png}
    \caption{Visual execution plan for non-optimized query 4}
\end{figure}

\subsubsection{Execution Plan After Optimization}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/query_trees/query4-optimized.png}
    \caption{Query tree for optimized query 4}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q4-2-new.png}
    \caption{Visual execution plan for optimized query 4}
\end{figure}

\subsection{Query 5}

\subsubsection{Execution Plan Before Optimization}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/query_trees/query5-non-optimized.png}
    \caption{Query tree for non-optimized query 5}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q5-1-old.png}
    \caption{Visual execution plan for non-optimized query 5}
\end{figure}

\subsubsection{Execution Plan After Optimization}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/query_trees/query5-optimized.png}
    \caption{Query tree for optimized query 5}
\end{figure}
\begin{figure}[H]
    \centering
    \includegraphics[width=\textwidth]{images/execution_plans/q5-4-new.png}
    \caption{Visual execution plan for optimized query 5}
\end{figure}
